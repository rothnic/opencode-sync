pre-commit:
  parallel: true
  commands:
#    secrets-check:
#      run: bun run scripts/check-secrets.ts {staged_files}
#      glob: "*"
    
    no-auth-files:
      run: |
        if git diff --cached --name-only | grep -E '(antigravity-accounts|auth|credentials)\.json$'; then
          echo "\n\033[1;31m‚ùå BLOCKED: Attempted to commit auth files!\033[0m"
          echo "These files contain secrets and must NEVER be committed:"
          echo "  - antigravity-accounts.json (OAuth tokens)"
          echo "  - auth.json (session state)"
          echo "  - credentials.json (API credentials)"
          echo "\nRun: git reset HEAD <file> to unstage"
          exit 1
        fi
    
    typecheck:
      glob: "*.ts"
      run: bun run typecheck

pre-push:
  commands:
    test:
      run: bun test --run
